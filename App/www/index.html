<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height"/>
        <link rel="stylesheet" href="css/themes/customTheme.css" />

        <link rel="stylesheet" href="css/themes/jquery.mobile.icons.min.css" />
        <link rel="stylesheet" href="css/themes/jquery.mobile.structure-1.4.5.min.css" />
        <link rel="stylesheet" href="css/mtApp.css" />

        <script src="js/lib/jquery-1.11.2.min.js"></script>
        <script src="js/lib/jquery.mobile-1.4.5.min.js"></script>

        <script>
            function onLoad() {
                document.addEventListener("deviceready", onDeviceReady, false);
                //onDeviceReady()
            }

            function onDeviceReady() {
                console.info('device ready function called ');

                //Called when there are unknown errors
                $.ajaxSetup({
                    timeout: 10000
                });

                $(document).ajaxError(function (event, xhr) {
                    console.error('Ajax call failed ' + xhr.status);
                    if (xhr.status == 401) {
                        navigator.notification.alert('You are not authenticated to access the content');
                        loadLoginPage();
                    } else if (xhr.status != 500) {
                        navigator.notification.alert('Oops!! Something went wrong', exitApp);
                    }
                });

                $(document).ajaxSend(function (event, xhr, options) {
                    console.info('send called ');
                    xhr.setRequestHeader('authToken', authToken);
                });

                $(document).ajaxStart(function () {
                    $('body').addClass("loading");
                });

                $(document).ajaxStop(function () {
                    console.info('Ajax Stop called ');
                    $('body').removeClass("loading");
                    // $('.ui-btn:hover').removeClass('.ui-btn:hover').addClass('ui-btn-active');
                });

               
                document.addEventListener("backbutton", onBackKeyDown, false);

            }

            function onBackKeyDown() {
                var hashVal = location.hash;
                console.log("The hash value is " + hashVal);
                if (hashVal) {
                    if (hashVal == '#landingPage') {
                        showLogoutPopUp();
                    } else if (hashVal == '#loginPage') {
                        exitApp();
                    } else {
                        console.info('inside back history ');
                        //$(".curvedButton").addClass('ui-btn-active');
                        //$(".curvedButton").button('refresh');
                        navigator.app.backHistory();
                    }
                } else {
                    exitApp();
                }
            }

            function exitApp() {
                console.info('exiting the app');
                navigator.app.exitApp();
            }


        </script>
    </head>
    <body onload="onLoad()">
        <!--Login page-->
        <div data-role="page"  id="loginPage">
            <div data-role="header">
                <div id="logoContainer" class="mtHeader">
                    <img src="img/SupportLogo.png" style="max-width: 100%;width:auto;"/>
                </div>
            </div>
            <div id="loginMainContainer" data-role="main" class="ui-content">
                <form id="loginForm">
                    <div class="ui-field-contain">
                        <label for="user">User ID:</label>
                        <input type="text" name="user" id="user" placeholder="User ID">  
                        <br/>
                        <label for="password">Password:</label>
                        <input type="password" name="password" id="password" placeholder="Password:"> 
                    </div> 
                </form>
                <input id="loginButton" type="button" value="Login" data-inline="true" onclick="autheticateUser();
                        return false;">
            </div>
        </div>
        <!--- Landing  Page-->
        <div data-role="page" id="landingPage">
            <div data-placeholder="header"></div>
            <!--Main Content-->
            <div data-role="main" class="ui-content">
                <br/>
                <button class="ui-btn ui-corner-all curvedButton ui-btn-icon-right ui-icon-carat-r" 
                        onclick="navigateToPage('client')">View Client Data</button>
                <button class="ui-btn ui-corner-all curvedButton ui-btn-icon-right ui-icon-carat-r" 
                        onclick="navigateToPage('errors')">View Application Errors</button>
                <button class="ui-btn ui-corner-all curvedButton ui-btn-icon-right ui-icon-carat-r" 
                        onclick="navigateToPage('access')">Provide Access Roles</button>
            </div>
        </div>

        <!--View Client Data-->
        <div data-role="page" id="client">
            <div data-placeholder="header"></div>

            <div data-role="main" class="ui-content">
                <fieldset class="ui-field-contain" >
                    <div id="clientData" data-role="fieldcontain">
                        <label for="clientId">Client ID:</label>
                        <select name="clientId" id="clientId" >
                            <option value="-1">Choose a Client Id</option>
                        </select>
                    </div>		
                </fieldset>
            </div>
        </div>

        <div id="errors" data-role="page">
            <div data-placeholder="header"></div>
            <div data-role="content">
                <ul id="logs" data-role="listview" data-inset="true" data-filter="true">


                </ul>
                <input type="button" value="Forward" onclick="alert('Selected Items Moved to L2')"/>
            </div></div>


        <div id="access" data-url="Access Roles" data-role="page">
            <div data-placeholder="header"></div>

            <div data-role="content">
                <div data-role="fieldcontain">
                    <label for="accessClient">Client ID</label>
                    <input type="text" name="Client ID" id="accessClient" />
                </div>
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup" data-type="horizontal">
                        <legend>Groups</legend>
                        <input id="radio1" type="radio" name="rdo_tw33" value="Adminitrators"/>
                        <label for="radio1">Adminitrators</label>
                        <input id="radio2" type="radio" name="rdo_tw33" value="Support User"/>
                        <label for="radio2">Support User</label>
                    </fieldset>
                </div>
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup">
                        <legend>Roles</legend>
                        <input id="cbx_tw34_1" type="checkbox" name="cbx_tw34" value="Monitoring"/>
                        <label for="cbx_tw34_1">Monitoring</label>
                        <input id="cbx_tw34_2" type="checkbox" name="cbx_tw34" value="Deployment"/>
                        <label for="cbx_tw34_2">Deployment</label>
                    </fieldset>
                </div>
                <input type="button" value="Submit" onclick="alert('Data Submitted Successfully')"/>
            </div>
        </div>

        <div class="modal"><!-- For showing the spinner while loading the Page--></div>
        <div id="headerPlaceholder">
            <div data-role="panel" id="navpanel" data-theme="a" data-display="overlay" data-position="left" 
                 style="top: 45px;background-color: #e6e6e6;">
                <div data-role="controlgroup" data-corners="false"> 
                    <div id="1" class="paneldiv">View Client Data</div>
                    <div id="2" class="paneldiv">View Application Errors</div>
                    <div id="3" class="paneldiv">Provide Access Roles</div>
                    <div id="4" class="paneldiv" onclick="showLogoutPopUp()">Logout</div>

                </div>
                
                
<!--                <div id="panel">
                    <div>View Client Data</div>
                     <div>View Client Data</div>
                      <div>View Client Data</div>

 <a href="#" id="vcd" data-role="button">View Client Data</a>
                    <a href="#" id="vae" data-role="button">View Application Errors</a>
                    <a href="#" id="par" data-role="button">Provide Access Roles</a>
                    <a href="#" id="4" data-role="button" onclick="showLogoutPopUp()">Logout</a>
                </div>-->
            </div>
            <div data-role="header" class="mtHeader">
                <h1 style="margin: 0;"></h1>
                <a href="#" data-icon="bars" data-iconpos="notext" data-shadow="false" data-iconshadow="false" onclick="showPanel()"></a>
            </div>
        </div>

        <script src="js/mtApp.js"></script>
        <script type="text/javascript" src="cordova.js"></script>
    </body>

</html>